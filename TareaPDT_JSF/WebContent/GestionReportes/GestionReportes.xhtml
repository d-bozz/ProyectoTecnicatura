<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
<h:outputStylesheet name="css/bootstrap.min.css"/>
</h:head>
<body>
	
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="../GestionUsuarios/Index.xhtml">Green Place</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link" href="../GestionUsuarios/GestionUsuarios.xhtml">Gestion de Usuarios
            </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="../GestionObservaciones/ListadoObservaciones.xhtml">Gestion de Observaciones</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="../GestionReportes/GestionReportes.xhtml">Gestion de Reportes</a>
          </li>
          <li>
            <div class="badge badge-info">
             #{usuario.usuario} 
             </div>
          </li>
        </ul>
      </div>
    </div>
  </nav>
	
	
	<h:form class="form-group">
		<h:messages style="color:red;margin:8px;" />
		
		<h:panelGrid columns="1">
		
		<h:outputLabel value="Observacion" />
			<h:selectOneMenu value="#{observacion.zona}" style="margin-top: 100px">
   				<f:selectItems   value="#{observacion.zonas}" var="zona" itemValue="#{zona.nombre_zona}" 
   				itemLabel="#{zona.nombre_zona}" />
			</h:selectOneMenu>
		<p:outputLabel value= "Fecha Hasta" style="margin-top: 100px"/>
			<p:calendar id="hasta" value="#{observacion.hasta}" outcome="#{observacion.hasta}" var="hasta" mode="popup" pattern="dd/MM/yy" style="margin-top: 100px"/>
			
			<p:outputLabel value= "Fecha Desde" style="margin-top: 100px"/>
			<p:calendar id="desde" value="#{observacion.desde}" outcome="#{observacion.desde}" var="desde" mode="popup" pattern="dd/MM/yy" style="margin-top: 100px"/>
			
		</h:panelGrid>
		<h:commandButton value="Buscar"	action="#{observacion.seleccionarObservaciones()}"/>
		<h:commandLink action="#{usuario.logout}" value="Logout" class="btn btn-outline-dark" style="margin-top: 100px"></h:commandLink>
		</h:form>

	<h3 style="text-align:center">Observaciones seleccionadas</h3>
	<h:form id="formTabla">
	<h:dataTable value="#{observacion.observacionesFiltradas}"
		var="observacion"
		  class="table table-striped table-dark">
   
		<h:column>
			<f:facet name="header">Codigo</f:facet>    				
      		 #{observacion.codigo_OBS}
   		</h:column>

		<h:column>
			<f:facet name="header">Nombre</f:facet>
		      #{observacion.usuario.usuario}
		</h:column>

		<h:column>
			<f:facet name="header">Fenomeno</f:facet>
      		#{observacion.fenomeno.nombreFen}
   		</h:column>

		<h:column>
			<f:facet name="header">Localidad</f:facet>
      		#{observacion.localidad.nombreLoc}
		</h:column>
		
		<h:column>
			<f:facet name="header">Descripcion</f:facet>
      		#{observacion.descripcion}
		</h:column>
		
		<h:column>
			<f:facet name="header">Ver Detalle</f:facet>
			<h:link value="Ver detalle" outcome="DetalleObservacion.xhtml" class="badge badge-success">
    			<f:param name="id" value="${observacion.id}" />
			</h:link>
		</h:column>
	</h:dataTable>
	</h:form>

</body>
</html>
