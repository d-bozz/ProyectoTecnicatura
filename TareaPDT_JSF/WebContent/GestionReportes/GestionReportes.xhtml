<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
<h:outputStylesheet name="css/bootstrap.min.css"/>
<link rel="stylesheet" href="../resources/css/style.css"/>
</h:head>
<body>
	
	<nav class="navbar navbar-expand-lg navbar-dark bg-success fixed-top">
    <div class="container">
      <a class="navbar-brand" href="../GestionUsuarios/Index.xhtml">Green Place</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link" href="../GestionUsuarios/GestionUsuarios.xhtml">Gestion de Usuarios
            </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="../GestionObservaciones/ListadoObservaciones.xhtml">Gestion de Observaciones</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="../GestionReportes/GestionReportes.xhtml">Gestion de Reportes</a>
          </li>
            <li>
            <div class="badge badge-primary">
             #{login.username} 
             </div>
          </li>
            <li class="nav-item active">
            <h:commandLink action="#{login.logout}"  class="close" style="margin-right:1px;color:white;" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></h:commandLink>
          </li>
        </ul>
      </div>
    </div>
  </nav>
	
	
	<h:form class="form-group">
		<h:messages style="color:red;margin:8px;" />
		
		<div id="Filtros">
		<div class="container">
			<div class="row">
	            <div class="col-xs-7"><br/>
	                <h1>Filtros de Busqueda:</h1>
	            </div>	
	        </div>
			<hr></hr>	
	  			<div class="row">
				<div class="col-md-3">
					
					<div class="form-group">
							<label for="zona">Zona:</label>
							<h:outputLabel  name="zona"/>
							<h:selectOneMenu value="#{observacion.zona}"  class="form-control" >
			   					<f:selectItems   value="#{observacion.zonas}" var="zona" itemValue="#{zona.nombre_zona}" 
			   					itemLabel="#{zona.nombre_zona}" />
							</h:selectOneMenu>
					</div>
					
					<div class="form-group">
							<label for="fechadesde">Fecha Desde:</label>
							<h:outputLabel  name="fechadesde"/>
							<p:calendar id="desde" value="#{observacion.desde}" outcome="#{observacion.desde}" var="desde" mode="popup" pattern="dd/MM/yy"  />
					</div>
					<div class="form-group">
							<label for="fechahasta">Fecha Hasta:</label>
							<h:outputLabel  name="fechahasta"/>
							<p:calendar id="hasta" value="#{observacion.hasta}" outcome="#{observacion.hasta}" var="hasta" mode="popup" pattern="dd/MM/yy" />
					</div>
						
						<h:commandButton value="Filtrar"	action="#{observacion.seleccionarObservaciones()}" class="btn btn-outline-success"></h:commandButton>
				 </div>
				</div>
		</div>
	</div>
			
</h:form>
		
	<h3 style="text-align:center">Observaciones seleccionadas</h3>
	<h:form id="formTabla">
	<h:dataTable value="#{observacion.observacionesFiltradas}"
		var="obserTabla"
		  class="table table-striped table-dark">
   
		<h:column>
			<f:facet name="header">Codigo</f:facet>    				
      		 #{obserTabla.codigo_OBS}
   		</h:column>

		<h:column>
			<f:facet name="header">Usuario</f:facet>
		      #{obserTabla.usuario.usuario}
		</h:column>

		<h:column>
			<f:facet name="header">Fenomeno</f:facet>
      		#{obserTabla.fenomeno.nombreFen}
   		</h:column>

		<h:column>
			<f:facet name="header">Zona</f:facet>
      		#{obserTabla.localidad.departamento.zona.nombre_zona}
		</h:column>
		
		<h:column>
		<f:facet name="header">Fecha de Observacion</f:facet>
			<h:outputText value="#{obserTabla.fecha}" >
    		<f:convertDateTime pattern="dd/MM/yyyy" />
			</h:outputText>
		</h:column>
		
		<h:column>
			<f:facet name="header">Estado</f:facet>
      		#{obserTabla.estado.nombre}
		</h:column>
		
		<h:column>
			<f:facet name="header">Ver Detalle</f:facet>
			<h:link value="Ver detalle" outcome="/GestionObservaciones/DetalleObservacion.xhtml" class="badge badge-success">
    			<f:param name="id" value="${obserTabla.id}"/>
			</h:link>
		</h:column>
	</h:dataTable>
	</h:form>

</body>
</html>
